# Copyright (c) 2024 The ZMK Contributors
# SPDX-License-Identifier: MIT

# ========================================
# MINIMAL BOOT TEST CONFIGURATION
# ========================================
# Matches display_test configuration exactly

# Enable Bluetooth for scanning keyboard advertisements
CONFIG_BT=y
CONFIG_BT_OBSERVER=y

# Enable ZMK Display and LVGL for UI
CONFIG_DISPLAY=y
CONFIG_ZMK_DISPLAY=y
CONFIG_LVGL=y

# Using ZMK BUILT_IN screen (like display_test) - NOT CUSTOM
# CONFIG_ZMK_DISPLAY_STATUS_SCREEN_CUSTOM=y

# Dedicated display work queue for better performance
CONFIG_ZMK_DISPLAY_WORK_QUEUE_DEDICATED=y
CONFIG_ZMK_DISPLAY_DEDICATED_THREAD_STACK_SIZE=8192

# LVGL memory pool - required for complex UIs (matches minimal-test)
CONFIG_LV_Z_MEM_POOL_SIZE=32768

# Main thread stack - increased for LVGL 9 (matches minimal-test)
CONFIG_MAIN_STACK_SIZE=4096

# Layout engine - required for LVGL 9
CONFIG_LV_USE_FLEX=y
CONFIG_LV_USE_LABEL=y
CONFIG_LV_USE_BAR=y

# DISABLED FOR MINIMAL BOOT TEST:
# CONFIG_PROSPECTOR_MODE_SCANNER=y
# CONFIG_PROSPECTOR_MULTI_KEYBOARD=y

# PWM DISABLED - use GPIO backlight instead (matches display_test)
CONFIG_PWM=n

# Enable SPI for display communication
CONFIG_SPI=y

# Enable GPIO for hardware control
CONFIG_GPIO=y

# ZMK Studio DISABLED for minimal test
CONFIG_ZMK_STUDIO=n

# Power management DISABLED
CONFIG_PM_DEVICE=n

# LED subsystem DISABLED
CONFIG_LED=n

# Logging configuration (enable for debugging)
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_MAX_LEVEL=4
CONFIG_ZMK_LOG_LEVEL_DBG=y

# Fault dump for crash debugging
CONFIG_FAULT_DUMP=2
CONFIG_EXTRA_EXCEPTION_INFO=y

# Disable split keyboard features (this is a scanner, not keyboard)
CONFIG_ZMK_SPLIT=n

# ========== Step 5: I2C/Touch/Sensor ==========
# I2C bus for touch and sensor
CONFIG_I2C=y

# Touch panel (CST816S) - interrupt mode via IRQ pin (D0)
CONFIG_INPUT=y
CONFIG_INPUT_CST816S=y
CONFIG_INPUT_CST816S_INTERRUPT=y

# Light sensor (APDS9960) - for auto-brightness
CONFIG_SENSOR=y
CONFIG_APDS9960=y
CONFIG_APDS9960_TRIGGER_NONE=y

